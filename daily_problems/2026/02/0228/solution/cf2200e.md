**提示 1：** 找到杀招。

**提示 2：** 如果没有杀招怎么办？

如果序列本身已经排序，显然 Bob 已经获胜。

否则，Alice 可以先行动。如果存在一个数 $x$ 可以分解为不同的质因子，我们取最小的一个 $p$ ，将其拆分为 $x/p, p$ ，这样无论后来 $x/p$ 怎么变，都会有一个大于 $p$ 的数在前面（因为有个更大的质因子在前面），Alice 就赢了。

不然的话，所有的数都是质数的若干幂次。如果完全分解后的序列是有序的，则 Bob 一定可以达到这个序列 / 更早之前就获胜了，也就必胜了；不然的话，Alice 可以在完全分解后的序列中找到不满足排序的相邻位置，设有一个 $x\gt y$ ，则直接先把后面那个数拆出来一个 $y$ ，则前面那个数无论怎么拆都不可能比 $y$ 小，就已经让 Bob 无论怎么操作都无法达成要求了。

我们可以在做素数筛的时候记录质因子和质因子个数，这样，时间复杂度为 $\mathcal{O}(M\log\log M+\sum n)$ 。

### 具体代码如下——

Python 做法如下——

```Python []
def main(): 
    M = 10 ** 6
    pr = list(range(M + 1))
    cnt = [0] * (M + 1)
    
    for i in range(2, M + 1):
        if pr[i] == i:
            for j in range(i, M + 1, i):
                pr[j] = i
                cnt[j] += 1
    
    t = II()
    outs = []
    
    for _ in range(t):
        n = II()
        nums = LII()
        
        def check():
            for i in range(1, n):
                if nums[i] < nums[i - 1]: return False
            return True
    
        if check(): outs.append('Bob')
        else:
            flg = False
            for i in range(n):
                if cnt[nums[i]] > 1: flg = True
                nums[i] = pr[nums[i]]
    
            if flg: outs.append('Alice')
            else: outs.append('Bob' if check() else 'Alice')
    
    print('\n'.join(outs))
```

C++ 做法如下——

```cpp []
int main() {
	ios_base::sync_with_stdio(false);
	cin.tie(0);
	cout.tie(0);

	int M = 1e6;
	vector<int> pr(M + 1), cnt(M + 1, 0);
	iota(pr.begin(), pr.end(), 0);

	for (int i = 2; i <= M; i ++) {
		if (pr[i] == i) {
			for (int j = i; j <= M; j += i) {
				pr[j] = i;
				cnt[j] ++;
			}
		}
	}

	int t;
	cin >> t;

	while (t --) {
		int n;
		cin >> n;

		vector<int> nums(n);
		for (auto &v: nums) cin >> v;

		auto check = [&] () -> bool {
			for (int i = 1; i < n; i ++)
				if (nums[i] < nums[i - 1]) return false;
			return true;
		};

		if (check()) cout << "Bob\n";
		else {
			bool flg = false;
			for (auto &x: nums) {
				if (cnt[x] > 1) flg = true;
				x = pr[x];
			}

			if (flg) cout << "Alice\n";
			else cout << (check() ? "Bob\n" : "Alice\n");
		}
	}

	return 0;
}
```
