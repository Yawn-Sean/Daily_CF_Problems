**提示 1：** 本质上是一个表达式求值的问题。表达式中，数从哪里来？运算符从哪里来？

**提示 2：** 题目要求的运算顺序是同一个括号内从右到左，怎么设置优先级满足这样的顺序？

如果不熟悉表达式计算的朋友可以先去查看对应的栈的应用。

首先，我们这里涉及到的运算符只有两种：一种是括号，交代了运算顺序；一种是 `'->'` ，用来进行 $\max(x_0+1,x_1)$ 的运算。

而用来计算的数实际上是单括号 `'()'` ，而凡是这样相邻出现的成对括号都能理解为一个数字 $0$ ，因此，现在整个表达式可以被我们认为是一堆 $0$ 的运算，运算符包括表示运算顺序的括号以及 `'->'` 。

接下来的步骤就跟表达式求值完全一致了，不过这里要求计算顺序是从右往左。

我们简单阐述下如何处理这个表达式求值问题。我们要维护两个栈，一个栈表示目前尚未计算的数字，另一个栈表示目前尚未进行的操作。

- 如果遇到了一个 $0$ ，将其放入数字栈。

- 如果遇到前括号或 `'->'`，则往操作栈中放入之。

- 如果遇到后括号，不断从数字栈和操作栈中弹出两个数字和一个操作，运算后，将计算结果推到数字栈中。这样进行计算恰好满足是从右往左进行的计算。

- 最后遍历完整个字符串时，将剩余没有进行的操作统一进行计算。

整体而言时间复杂度为 $\mathcal{O}(n)$ ，因为只是遍历了表达式，且出入栈总次数是这个量级。

#### 具体代码如下（只包含中间处理部分）——

```Python []
def main():
    # 为方便操作，直接把 '()' 替换为 '0'，'->' 替换成操作标记 ','
    s = I().replace('()', '0').replace('->', ',')

    numbers = []
    ops = []
    for c in s:
        if c == '0':
            numbers.append(0)
        # 用数字代表两种操作
        elif c == ',':
            ops.append(1)
        elif c == '(':
            ops.append(0)
        else:
            while ops[-1]:
                x, y = numbers.pop(), numbers.pop()
                numbers.append(max(x, y + 1))
                ops.pop()
            ops.pop()

    while ops:
        x, y = numbers.pop(), numbers.pop()
        numbers.append(max(x, y + 1))
        ops.pop()

    print(numbers[0])
```