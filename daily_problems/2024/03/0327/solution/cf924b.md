**提示：** 我们要最大化的数值有三个变量，尝试固定其中的一个变量位置。

很典型的双指针练习题，希望你不要收获罚时！

我们先观察我们的最大化问题与需要满足的性质。

最大化的函数是 $\frac{E_k-E_j}{E_k-E_i}$ ，要求 $i\lt j\lt k$ 且 $E_k-E_i\leq U$ 。

我们可以发现，如果 $i,k$ 固定，那么给 $j$ 施加的约束只有在 $i,k$ 之间。

而由此来看，显然这个函数是关于 $j$ 的减函数，于是 $j$ 越小越好，即应当取 $i+1$ .

而接下来考虑 $k$ ，可以发现该函数是关于 $k$ 的增函数（考虑 $k$ 增大会使得比值更接近 $1$ ，而该比值本身小于 $1$ ）。于是 $k$ 应当尽可能大。

于是我们的 $k$ 取使得 $E_k-E_i\leq U$ 的最大的 $k$ 。

接下来，我们对于固定的 $i$ ，其 $j, k$ 取值固定，且 $k$ 位置单调右移，因此可以使用双指针枚举 $i$ ，即可得到答案。

时间复杂度为 $\mathcal{O}(n)$ .

#### 具体代码如下（只包含中间处理部分）——

```Python []
def main():
    
    n, u = MII()
    nums = LII()

    l, r = 0, 0
    ans = -1
    
    while l < n:
        while r < n and nums[r] - nums[l] <= u:
            r += 1
        
        # 保证 i, j, k 不重合
        if r - l >= 3:
            ans = max(ans, (nums[r-1] - nums[l+1]) / (nums[r-1] - nums[l]))
        
        l += 1

    print(ans)
```