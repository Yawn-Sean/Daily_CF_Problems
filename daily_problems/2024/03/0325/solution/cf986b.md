**提示 1：** 一次交换怎么影响数组的性质？

**提示 2：** 在上述性质的基础上， $3n$ 和 $7n+1$ 有何差别？

由于这里进行的交换是 **任意的** ，因此，我们应当选择一个 **通用的性质** 进行判断。

而对一个无重复元素的数组进行交换，会改变的是其 **逆序对** ，且改变的数量为 $1$ 。（逆序对数量，即满足 $i\lt j$ 且 $a[i]\gt a[j]$ 的数对 $(i,j)$ 个数。）

而 $3n$ 和 $7n+1$ 有何差别呢？发现 $(7n+1)-3n=4n+1$ 为奇数，因此两者 **奇偶性不同** 。

于是，从一个开始逆序对数量为 $0$ 的数组开始，每进行一次操作，逆序对改变 $1$ ，而因此，我们最后数组的逆序对奇偶性应该与操作次数奇偶性一致。我们只需要判断这个奇偶性与 $3n$ 还是 $7n+1$ 一致即可。

计算逆序对数量可以使用归并排序（分治想法） / 树状数组。时间复杂度为 $\mathcal{O}(n\log n)$ .

**Bonus：** 请在以上逻辑的基础上给出一个时间复杂度为 $\mathcal{O}(n)$ 的做法。

#### 具体代码如下（只包含中间处理部分）——

```Python []
def main():
    n = II()
    nums = LII()

    fen = FenwickTree(n + 1)
    cnt = 0
    for i in range(n - 1, -1, -1):
        cnt += fen.sum(nums[i])
        fen.add(nums[i], 1)

    # 3n 与 n 奇偶性相同
    print('Um_nik' if (cnt - n) % 2 else 'Petr')
```
