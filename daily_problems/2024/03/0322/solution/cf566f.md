**提示 1：** 一个团表示原图的一个子图，其中点两两连了一条无向边。那么在题中对图的定义下，团中点满足什么性质？

**提示 2：** 如何找到满足性质的最大子集？

我们先看提示 1，一个团中点两两连线，而根据题目的定义，连线的点对应的数应当满足整除关系。因此一个团内所有的点可以两两满足整除关系。

我们从小到大考虑每一个数，则大的数得被所有比它小的数整除。考虑排序后的数组为 $a_1,a_2,\dots,a_n$ ，则 $a_{i+1}$ 能被 $a_1,a_2,\dots,a_i$ 整除。

事实上，上述条件可以简化为对于每一个 $i$ 有 $a_{i+1}$ 被 $a_i$ 整除，因为 $a_i$ 已经可以被 $a_1,a_2,\dots,a_{i-1}$ 整除了， $a_i$ 已经包含了所有必要的整除信息。

综上所述，我们只需要找到一个最大的集合，使其排序后相邻两项满足整出关系。

如何找到最大集合呢？我们考虑使用 DP 。

假设我们目前找到的以 $x$ 作为最大元素的集合至多有 $k$ 个元素，则其下一个元素可能是 $2x,3x,\dots$ ，我们枚举下一个元素进行状态转移即可。（这么看题目对于数字两两不同的限制还是挺多余的）

为什么这样做是合理的呢？因为我们元素有上界 $10^6$ ，因此对于 $x$ 状态的转移次数为 $\frac{10^6}{x}$ ，于是，我们可以得到总状态转移次数是 $\sum\limits_{x=1}^{10^6}\frac{10^6}{x}=10^6\sum\limits_{x=1}^{10^6}\frac{1}{x}=\mathcal{O}(10^6\log 10^6)$ .

于是时间复杂度为 $\mathcal{O}(M\log M)$ .

#### 具体代码如下（只包含中间处理部分）——

```Python []
def main():
    n = II()
    nums = LII()
    
    cnt = [0] * (10 ** 6 + 1)
    for num in nums:
        cnt[num] += 1
    
    dp = [0] * (10 ** 6 + 1)
    for i in range(1, 10 ** 6 + 1):
        dp[i] += cnt[i]
        for j in range(i, 10 ** 6 + 1, i):
            dp[j] = max(dp[j], dp[i])
    
    print(max(dp))
```