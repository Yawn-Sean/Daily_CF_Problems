**提示 1：** 考虑现在数组中已经有两个相邻的数 $a,b$ ，那么 $a,b$ 之间任何的数插入这个位置都不影响总分数。

**提示 2：** 根据第一个提示，我们只需要插入 $1,x$ 两个元素就够了，想想为什么？

**提示 3：** $1, x$ 的插入会如何影响总分？两者的影响是独立的吗？

首先，如果现在有两个相邻的数 $a,b$ ，那么其中插入一个 $c$ ，如果 $c$ 在 $a,b$ 之间，那么 $|a-c|+|b-c|=|a-b|$ ，因此不影响分数。

于是，我们插入 $1\sim x$ 的过程中，先插入元素 $1,x$ 两个元素，剩下的元素一定在 $1,x$ 之间的某两个相邻元素元素之间，因此总能使得之后的分数不变。**因此我们只需考虑 $1, x$ 两个元素插入造成的影响即可** 。

我们先考虑分别填入 $1$ 和 $x$ 。

添加的方法分为这三类：添加在开头，添加在结尾，添加在某两个元素的中间。其对分数的增大情况很容易分析。

我们对 $1$ 的计算结果最小值和 $x$ 的计算结果最小值进行加总，即为最小的增大值。

而这需要我们保证 $1,n$ 两个计算结果的最小值不会相互影响，即两者对结果的贡献是相互独立的。

什么时候插入 $1$ 和插入 $x$ 会相互影响呢？就是他们插入在同一个位置上的时候。

然而此时总可以选择 $1,x$ 中的一个到别的区间，以使得前面的计算结果和不增大。因此一定不会在上述贪心过程中被放到同一个区间。

- 如果两个元素一开始都挤在中间的某个区间，那么 $1$ 一定比两侧的最小值要小，因此可以往最小值的那一端区间移动，使得结果不变大。

- 如果两个元素一开始都在两端中的一端。我们不妨假设数组中最大值不超过 $x$ ，最小值不小于 $1$ （否则总贡献一定是 $0$ ， $1,x$ 分别放入最小值和最大值之间某两个元素之间）。这样，设数组两端分别是 $a,b$ ，不妨设 $a\leq b$ ，那么把 $1$ 放到 $a$ 这边，把 $x$ 放到 $b$ ，那么计算出来的总数值是 $a-1+x-b=(x-1)-(b-a)$ ，一定小于同时放到某一端的计算结果 $x-1$ 。

因此上述贪心不会产生 $1,x$ 放在同一个区间，而算出的结果并非分数的情况。

时间复杂度为 $\mathcal{O}(n)$ .

#### 具体代码如下（只包含中间处理部分）——

```Python []
def main():
    n, x = MII()
    nums = LII()
    
    ans = 0
    for i in range(1, n):
        ans += abs(nums[i] - nums[i-1])
    
    v = min(nums[0], nums[-1]) - 1
    v = min(v, 2 * min(nums) - 2)
    ans += v
    
    v = x - max(nums[0], nums[-1])
    v = min(v, 2 * x - 2 * max(nums))
    ans += max(v, 0)
    return ans
```