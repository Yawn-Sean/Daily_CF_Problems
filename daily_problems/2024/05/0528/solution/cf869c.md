**提示 1：** 先找到一些显然的必要条件。

**提示 2：** 汇总这些可能的必要条件，它们是充分的吗？

**提示 3：** 找到条件后，怎么数数？

我们设三类颜色的点分别构成集合 $A,B,C$ ，则我们接下来探索下必要的条件。

首先，同一颜色的点显然不能相连。

其次，同一个点不能往一个颜色连两条边。举例而言， $A$ 中一点 $u$ 不可以同时连 $B$ 中的两个点 $v,w$ ，否则 $v\to u\to w$ 路径长度为 $2$ ，不满足题目要求。

事实上，上面两个条件就是充分的了。

因为我们已经使得不可能出现长度为 $1$ 和 $2$ 的两个端点颜色相同的路径出现了。

- 第一个条件显然杜绝了长度为 $1$ 的路径。

- 第二个条件，如果两个同色点的距离为 $2$ ，则它们同时连了另外的一个点，但这个点可以通过上述两个条件排除。

我们总结下计数的条件：一个颜色内部不连边；两个颜色间连的边不允许出现公共顶点。

最后计数。我们可以把边分为 $A-B, B-C, C-A$ 之间相连的三类。这三组相连的边互不影响，因此可以使用乘法原理，即把三种情况的方案数量相乘得到答案。

最后，我们以 $A-B$ 中的连边方案为例。

我们假设 $A$ 大小为 $x$ ， $B$ 大小为 $y$ ，则如果两者之间连了 $k$ 条边，则 $A$ 中连边的点的选择共有 $C_x^k$ 种， $B$ 种连边的点的选择共有 $C_y^k$ 种。最后把选出来的点进行两两匹配，共有 $k!$ 种方案。

上述结果相乘，可以得到连 $k$ 条边时，共有 $C_x^kC_y^k k!$ 种方案。

对所有 $k$ 相加，即可得到总方案数量。

组合数的计算可以使用杨辉三角，也可以使用逆元计算，[之前的题解](https://github.com/Yawn-Sean/Daily_CF_Problems/blob/main/daily_problems/2024/05/0511/solution/cf852f.md) 的最后有提到怎么处理。

时间复杂度为 $\mathcal{O}(\max(a,b,c))$ ，如果使用逆元计算答案。

#### 具体代码如下（只包含中间处理部分）——

```Python []
def main():
    mod = 998244353
    fac = Factorial(5001, mod)
    a, b, c = MII()

    def f(x, y):
        ans = 0
        for i in range(min(x, y) + 1):
            ans += fac.combi(x, i) * fac.combi(y, i) % mod * fac.fac(i) % mod
            ans %= mod
        return ans

    print(f(a, b) * f(b, c) % mod * f(a, c) % mod)
```